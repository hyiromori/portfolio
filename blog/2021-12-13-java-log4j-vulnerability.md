# Java の Log4j の脆弱性関連の資料まとめ

かなり深刻な脆弱性で、後から見返したいときも出てきそうなので、自分用に資料をまとめておく。

## JPCERT/CC の注意喚起

[Apache Log4jの任意のコード実行の脆弱性（CVE-2021-44228）に関する注意喚起](https://www.jpcert.or.jp/at/2021/at210050.html)

## piyokango さんの記事

セキュリティ界隈で有名な [piyokango](https://profile.hatena.ne.jp/piyokango/) さんの記事。
これを見れば一通りのことが分かるので、とりあえずこれを見ておくのがおすすめ。

- [Log4jの深刻な脆弱性CVE-2021-44228についてまとめてみた - piyolog](https://piyolog.hatenadiary.jp/entry/2021/12/13/045541)
- [「log4j 2.15.0での対応が不十分として2.16.0で修正されたCVE-2021-45046の情報が更新されています。 当初DoSの影響を受けるとされた内容がリモートコード実行に、SeverityもModerateからCriticalに (CVSS 3.7 → 9.0) 変更されています。 https://t.co/ZQ4rmADsff https://t.co/AMImM9lPbE」 / Twitter](https://twitter.com/piyokango/status/1471753222063026178)

## Security NEXT

- [人気ライブラリ「Apache Log4j」に深刻な脆弱性、悪用も - 影響の確認や対策の実施を](https://www.security-next.com/132376)
- [「Apache Log4j 2.17.0」が公開 - サービス拒否の脆弱性を修正](https://www.security-next.com/132653)
- [GA版「Apache Log4j 2.16.0」がリリース - 脆弱性の原因機能を削除](https://www.security-next.com/132459)
- [「Log4jShell」の当初緩和策を否定 - 最新版への更新を](https://www.security-next.com/132515)
- [「Log4Shell」への攻撃、少なくとも12月初頭より展開 - PoC公開以前についても確認を](https://www.security-next.com/132487)
- [F-Secure、複数製品に「Apache Log4j」の脆弱性 - パッチをリリース](https://www.security-next.com/132391)
- [「Log4jShell」の悪用、国内でも多数検知 - 国内で被害も](https://www.security-next.com/132426)
- [各ベンダーが「Log4Shell」の検知方法、対策プログラムなどの情報を発信 - 「同2.15.0-rc1」には対策バイパスのおそれも](https://www.security-next.com/132414)
- [国内WAFベンダー「Log4jShell」に対応 - 約500サイトで攻撃を検知](https://www.security-next.com/132433)
- [「WebEx Meetings Server」などCisco複数製品に「Apache Log4j」由来の脆弱性](https://www.security-next.com/132387)
- [「Apache Log4j」の脆弱性、VMwareの36製品に影響](https://www.security-next.com/132381)
- [脆弱性検証ツール「OWASP ZAP」がアップデート - 「Log4jShell」の影響で](https://www.security-next.com/132498)
- [Google、一部クラウドサービスで「Log4Shell」の対応必要](https://www.security-next.com/132658)
- [ウェブアプリに対する「Apache Log4j」の無償診断を期間限定提供 - ラック](https://www.security-next.com/132672)
- [オンライン会議の「Zoom」、「Apache Log4j」脆弱性の影響を公表](https://www.security-next.com/132844)

## Publickey

[広く使われているJavaライブラリ「Log4j」に深刻な脆弱性。速やかに確認と対策を － Publickey](https://www.publickey1.jp/blog/21/javalog4j.html)

## TechCrunch

用語的に、ちょっと一般向けっぽく書かれているかな。

[iCloud、ツイッター、マインクラフトなどに使われているオープンソースのログユーティリティにゼロデイ脆弱性が見つかる | TechCrunch Japan](https://jp.techcrunch.com/2021/12/13/2021-12-10-apple-icloud-twitter-and-minecraft-vulnerable-to-ubiquitous-zero-day-exploit/)

## NHK

NHK も出すぐらい影響が大きいと判断しても良さそう。

[“ログソフト”に深刻なぜい弱性 IPA 早急な対策呼びかけ | IT・ネット | NHKニュース](https://www3.nhk.or.jp/news/html/20211214/k10013387051000.html)

## 対応策・緩和策

- [“Log4j用ワクチン”登場　脆弱性を利用して修正プログラムを実行 - ITmedia NEWS](https://www.itmedia.co.jp/news/articles/2112/13/news125.html)
- [Log4jの脆弱性対策としてAWS WAFのマネージドルールに「Log4JRCE」が追加されました | DevelopersIO](https://dev.classmethod.jp/articles/aws-waf-new-rule-log4jrce/)
- [Apache Log4j のためのホットパッチ | Amazon Web Services ブログ](https://aws.amazon.com/jp/blogs/news/hotpatch-for-apache-log4j/)
- [IPAが「Apache Log4j脆弱性」の暫定回避方法を紹介：最新バージョンへのアップデートを推奨 - ＠IT](https://atmarkit.itmedia.co.jp/ait/articles/2112/14/news035.html)

## 技術解説など

- [Log4jで話題になったWAFの回避/難読化とは何か - WAF Tech Blog ｜ クラウド型 WAFサービス Scutum 【スキュータム】](https://www.scutum.jp/information/waf_tech_blog/2021/12/waf-blog-081.html)
- [【図解】Log4jの脆弱性 CVE-2021-44228 (Log4shell or LogJam) について | SEの道標](https://milestone-of-se.nesuke.com/sv-advanced/sv-security/cve-2021-44228-log4shell-logjam/)
- [【PoCあり】log4jの脆弱性で攻撃される条件と対策を技術的に解説します。CVE-2021-44228 – Self branding](https://at-virtual.net/%E3%82%BB%E3%82%AD%E3%83%A5%E3%83%AA%E3%83%86%E3%82%A3/%E3%80%90poc%E3%81%82%E3%82%8A%E3%80%91log4j%E3%81%AE%E8%84%86%E5%BC%B1%E6%80%A7%E3%81%A7%E6%94%BB%E6%92%83%E3%81%95%E3%82%8C%E3%82%8B%E6%9D%A1%E4%BB%B6%E3%81%A8%E5%AF%BE%E7%AD%96%E3%82%92%E6%8A%80/)
- [Log4j 脆弱性を緩和するAWS WAFの「Log4JRCE」DevelopersIOサイトの3日間の検出結果を紹介します | DevelopersIO](https://dev.classmethod.jp/articles/log4jrce-devio-3day/)

## 教訓

これだな、って思ったのでメモ。

> log4j2のアレを調べたり色々してたんだけど、「何かのライブラリはその機能だけをやれ。単機能でちゃんと頑張れ。シンプルにしろ」「それ以外の機能はプラグインみたいにして本体に組み込むな」というプラクティスの大切さを感じた。
https://twitter.com/ockeghem/status/1469830333831204864

## その他

- [「Log4j」の脆弱性を突く攻撃手段の情報共有は違法？　日本ハッカー協会に聞いた - ITmedia NEWS](https://www.itmedia.co.jp/news/articles/2112/13/news163.html#utm_term=share_sp)
- [「Log4j」のトラブルってどうヤバいの？　非エンジニアにも分かるように副編集長に解説させた：ヤマーとマツの、ねえこれ知ってる？（1/3 ページ） - ITmedia NEWS](https://www.itmedia.co.jp/news/articles/2112/16/news128.html)
- [オランダ政府が「GitHub」にまとめているLog4Shell脆弱性情報がわかりやすいと一部で話題に - やじうまの杜 - 窓の杜](https://forest.watch.impress.co.jp/docs/serial/yajiuma/1374819.html)
  - [log4shell/software at main · NCSC-NL/log4shell](https://github.com/NCSC-NL/log4shell/tree/main/software)
- [「WAFのログで気づいたけど、ドイツのセキュリティ会社がLog4jの脆弱性を総当たり的に(?)スキャンしているらしい。日本の法律だとこれと同じことできるのかな? / “Log4J – Alpha Strike Labs” https://t.co/paq1Ca44Ju」 / Twitter](https://twitter.com/ockeghem/status/1472108707307986944)
- [インターネットを破壊するバグ「Log4Shell」へのパッチ適用競争が始まっている | TechCrunch Japan](https://jp.techcrunch.com/2021/12/15/2021-12-13-the-race-is-on-to-patch-log4shell-as-attacks-begin-to-rise/)
- [Apache Log4jの脆弱性とともに浮かび上がったオープンソースのメンテナの責任範囲の問題 - YAMDAS現更新履歴](https://yamdas.hatenablog.com/entry/20211222/apache-log4j)
