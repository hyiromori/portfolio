---
title: SPA認証トークンはlocalStorageでもCookieでもない、Auth0方式はいいねというお話 - @mizumotokのブログ
---

https://mizumotok.hatenablog.jp/entry/2021/08/04/114431

> Auth0のサーバとはCookieでセッションを維持しておき

結局のところ Cookie の認証なんだよね・・・。

> Auth0では一度認証を済ませてセッションができると、iframeとWeb WorkerのpostMessageを駆使して OpenID Connectの認可コードやアクセストークンを取得しています。実際の仕組みは後述しますが、OpenID Connectの仕組みで解決しているのです。

> ここでiframe経由で取得するという高度な技術が持ち込まれます。

> prompt=noneは認証UI（ログイン画面）や同意UI（承認 or 拒否）を表示しないためのもので、OpenID Connectの仕様に記載されています。

> response_mode=web_messageは仕様上はありません（queryまたはfragmentのみ）が、OAuth2の仕様では任意のresponse_modeを追加できることになっています。


## 関連記事

> どういう中身の実装になっているのかというと、HTMLの＜iframe＞というタグを酷使して、Silent Authenticationを実現しています。/auth0-spa-jsというGitHubのリポジトリ（https://github.com/auth0/auth0-spa-js）があって、僕もそれをがんばって読もうとして挫折したんですが（笑）。
>
> [認証用トークン保存先の第4選択肢としての「Auth0」 - ログミーTech](https://logmi.jp/tech/articles/324349)

「えっ？」と思ったこの記事を思い出した。
