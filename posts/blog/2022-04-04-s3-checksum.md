---
title: "AWS S3 の新しいチェックサムアルゴリズム(SHA-256)を AWS SDK (JavaScript) から検証してみた"
emoji: "🔍"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: ["AWS","S3]
published: false
---

## はじめに

[Amazon S3、データの整合性確認を最大90％高速化。新たなオブジェクトのチェックサムアルゴリズム追加で － Publickey](https://www.publickey1.jp/blog/22/amazon_s390.html) という記事を読んだのがきっかけです。
これまででも MD5 による検証ができたらしいのですが、今回はじめて知りせっかくなので SHA-256 でチェックするとどうなるのか検証してみました。

## 検証に使ったサンプルコード

Gist で作りました。
https://gist.github.com/mryhryki/83d071d428aa6b40fc7574a00083206c

## 試してみたこと

1. [PutObject](https://docs.aws.amazon.com/ja_jp/AmazonS3/latest/API/API_PutObject.html) で SHA-256 による検証を指定した場合
2. [マルチパートアップロード](https://docs.aws.amazon.com/ja_jp/AmazonS3/latest/userguide/mpuoverview.html) で SHA-256 による検証を指定した場合

### 試せなかったこと

[CompleteMultipartUpload](https://docs.aws.amazon.com/ja_jp/AmazonS3/latest/API/API_CompleteMultipartUpload.html) でチェックサムを指定できるようなのですが、パート毎にチェックした場合は全体のハッシュ値を検証できないようでした。

> When objects are uploaded to Amazon S3, they can either be uploaded as a single object or through the multipart upload process. Objects that are larger than 16 MB and uploaded through the console are automatically uploaded using multipart uploads. For more information about multipart uploads, see Uploading and copying objects using multipart upload.


## おわりに

より重要なデータをアップロードする際に使うと良さそうですね。

